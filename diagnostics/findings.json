{
  "timestamp": "2024-10-17T13:47:00Z",
  "repository": "Refactored-DuoFormer",
  "findings": [
    {
      "id": "mypy-001",
      "file_path": "src/duoformer/data/loaders/dataset.py",
      "line_number": 166,
      "severity": "HIGH",
      "type": "type_error",
      "description": "Subclass of Image and Tensor cannot exist: incompatible method signatures",
      "repro_command": "mypy --config-file mypy.ini src/duoformer/data/loaders/dataset.py"
    },
    {
      "id": "mypy-002",
      "file_path": "src/duoformer/data/loaders/dataset.py",
      "line_number": 330,
      "severity": "HIGH",
      "type": "type_error",
      "description": "Argument 2 to Subset has incompatible type Subset[Any]; expected Sequence[int]",
      "repro_command": "mypy --config-file mypy.ini src/duoformer/data/loaders/dataset.py"
    },
    {
      "id": "mypy-003",
      "file_path": "src/duoformer/models/duoformer_model.py",
      "line_number": 26,
      "severity": "CRITICAL",
      "type": "import_error",
      "description": "Module src.duoformer.models.backbone has no attribute Backbone",
      "repro_command": "mypy --config-file mypy.ini src/duoformer/models/duoformer_model.py"
    },
    {
      "id": "mypy-004",
      "file_path": "src/duoformer/models/duoformer_model.py",
      "line_number": 141,
      "severity": "CRITICAL",
      "type": "name_error",
      "description": "Name resnet50FeatureExtractor is not defined",
      "repro_command": "mypy --config-file mypy.ini src/duoformer/models/duoformer_model.py"
    },
    {
      "id": "mypy-005",
      "file_path": "src/duoformer/models/attention/multiscale_attn.py",
      "line_number": 159,
      "severity": "HIGH",
      "type": "type_error",
      "description": "Tensor not callable in forward_change_order_attn1",
      "repro_command": "mypy --config-file mypy.ini src/duoformer/models/attention/multiscale_attn.py"
    },
    {
      "id": "mypy-006",
      "file_path": "src/duoformer/models/attention/multiscale_attn.py",
      "line_number": 175,
      "severity": "HIGH",
      "type": "signature_error",
      "description": "Signature of forward incompatible with supertype timm.models.vision_transformer.Block",
      "repro_command": "mypy --config-file mypy.ini src/duoformer/models/attention/multiscale_attn.py"
    },
    {
      "id": "mypy-007",
      "file_path": "src/duoformer/models/transformer/multi_vision_transformer.py",
      "line_number": 96,
      "severity": "HIGH",
      "type": "signature_error",
      "description": "Signature of _init_weights incompatible with supertype timm.models.vision_transformer.VisionTransformer",
      "repro_command": "mypy --config-file mypy.ini src/duoformer/models/transformer/multi_vision_transformer.py"
    },
    {
      "id": "mypy-008",
      "file_path": "src/duoformer/models/transformer/multi_vision_transformer.py",
      "line_number": 111,
      "severity": "HIGH",
      "type": "signature_error",
      "description": "Signature of forward incompatible with supertype timm.models.vision_transformer.VisionTransformer",
      "repro_command": "mypy --config-file mypy.ini src/duoformer/models/transformer/multi_vision_transformer.py"
    },
    {
      "id": "mypy-009",
      "file_path": "src/duoformer/models/attention/scale_attention.py",
      "line_number": 22,
      "severity": "HIGH",
      "type": "signature_error",
      "description": "Signature of forward incompatible with supertype timm.layers.attention.Attention",
      "repro_command": "mypy --config-file mypy.ini src/duoformer/models/attention/scale_attention.py"
    },
    {
      "id": "mypy-010",
      "file_path": "src/duoformer/models/model_wo_extra_params.py",
      "line_number": 108,
      "severity": "CRITICAL",
      "type": "name_error",
      "description": "Name resnet50FeatureExtractor is not defined",
      "repro_command": "mypy --config-file mypy.ini src/duoformer/models/model_wo_extra_params.py"
    },
    {
      "id": "mypy-011",
      "file_path": "src/duoformer/training/train.py",
      "line_number": 46,
      "severity": "CRITICAL",
      "type": "import_error",
      "description": "Module src.duoformer.training.trainer has no attribute create_optimizer",
      "repro_command": "mypy --config-file mypy.ini src/duoformer/training/train.py"
    },
    {
      "id": "mypy-012",
      "file_path": "src/duoformer/training/train.py",
      "line_number": 53,
      "severity": "CRITICAL",
      "type": "import_error",
      "description": "Module src.duoformer.utils.exceptions has no attribute ValidationError",
      "repro_command": "mypy --config-file mypy.ini src/duoformer/training/train.py"
    },
    {
      "id": "black-001",
      "file_path": "scripts/check_system.py",
      "line_number": null,
      "severity": "MEDIUM",
      "type": "formatting",
      "description": "File needs black formatting",
      "repro_command": "black --check scripts/check_system.py"
    },
    {
      "id": "black-002",
      "file_path": "scripts/validate_data.py",
      "line_number": null,
      "severity": "MEDIUM",
      "type": "formatting",
      "description": "File needs black formatting",
      "repro_command": "black --check scripts/validate_data.py"
    },
    {
      "id": "black-003",
      "file_path": "tests/unit/test_fix_dataset_split.py",
      "line_number": null,
      "severity": "MEDIUM",
      "type": "formatting",
      "description": "File needs black formatting",
      "repro_command": "black --check tests/unit/test_fix_dataset_split.py"
    },
    {
      "id": "black-004",
      "file_path": "scripts/health_check.py",
      "line_number": null,
      "severity": "MEDIUM",
      "type": "formatting",
      "description": "File needs black formatting",
      "repro_command": "black --check scripts/health_check.py"
    },
    {
      "id": "black-005",
      "file_path": "train.py",
      "line_number": null,
      "severity": "MEDIUM",
      "type": "formatting",
      "description": "File needs black formatting",
      "repro_command": "black --check train.py"
    },
    {
      "id": "ruff-001",
      "file_path": "system",
      "line_number": null,
      "severity": "LOW",
      "type": "tool_missing",
      "description": "ruff command not found - needs installation",
      "repro_command": "pip install ruff"
    },
    {
      "id": "duplicate-001",
      "file_path": "config/",
      "line_number": null,
      "severity": "MEDIUM",
      "type": "duplication",
      "description": "Top-level config/ directory duplicates src/duoformer/config/",
      "repro_command": "diff -r config/ src/duoformer/config/"
    },
    {
      "id": "duplicate-002",
      "file_path": "models/",
      "line_number": null,
      "severity": "MEDIUM",
      "type": "duplication",
      "description": "Top-level models/ directory duplicates src/duoformer/models/",
      "repro_command": "diff -r models/ src/duoformer/models/"
    },
    {
      "id": "duplicate-003",
      "file_path": "demo_duoformer.ipynb",
      "line_number": null,
      "severity": "LOW",
      "type": "duplication",
      "description": "Top-level demo_duoformer.ipynb may duplicate notebooks/examples/demo_duoformer.ipynb",
      "repro_command": "diff demo_duoformer.ipynb notebooks/examples/demo_duoformer.ipynb"
    },
    {
      "id": "duplicate-004",
      "file_path": "Dockerfile.jupyter",
      "line_number": null,
      "severity": "LOW",
      "type": "duplication",
      "description": "Top-level Dockerfile.jupyter may duplicate infrastructure/docker/Dockerfile.jupyter",
      "repro_command": "diff Dockerfile.jupyter infrastructure/docker/Dockerfile.jupyter"
    },
    {
      "id": "stale-001",
      "file_path": "src/refactored_duoformer.egg-info/",
      "line_number": null,
      "severity": "LOW",
      "type": "stale_metadata",
      "description": "Stale packaging metadata directory",
      "repro_command": "ls -la src/refactored_duoformer.egg-info/"
    },
    {
      "id": "requirements-001",
      "file_path": "requirements.txt",
      "line_number": null,
      "severity": "MEDIUM",
      "type": "pip_tools_violation",
      "description": "requirements.txt is tracked in git but should be auto-generated from requirements.in",
      "repro_command": "git ls-files requirements.txt"
    }
  ],
  "summary": {
    "total_findings": 23,
    "critical": 5,
    "high": 7,
    "medium": 8,
    "low": 3,
    "by_type": {
      "type_error": 7,
      "import_error": 3,
      "name_error": 2,
      "signature_error": 3,
      "formatting": 5,
      "duplication": 4,
      "tool_missing": 1,
      "stale_metadata": 1,
      "pip_tools_violation": 1
    }
  }
}
