{
  "summary": {
    "repository": "Refactored-DuoFormer",
    "audit_date": "2025-10-17T12:29:01.658370",
    "total_findings": 8,
    "critical_findings": 0,
    "high_findings": 4,
    "medium_findings": 3,
    "low_findings": 1,
    "tests_passing": true,
    "formatting_applied": true,
    "type_checking_clean": false,
    "git_ignore_updated": true
  },
  "findings": [
    {
      "file_path": "src/duoformer/data/loaders/dataset.py",
      "line_number": 325,
      "severity": "High",
      "type": "type_annotation",
      "description": "Missing type annotations for train_indices, val_indices, test_indices",
      "repro_command": "python -m mypy src/duoformer/data/loaders/dataset.py",
      "impact": "Prevents proper type checking and IDE support",
      "fix_suggestion": "Add proper type annotations for dataset splitting variables"
    },
    {
      "file_path": "src/duoformer/models/duoformer_model.py",
      "line_number": 26,
      "severity": "High",
      "type": "import_error",
      "description": "Missing Backbone and Backbone2 classes in backbone module",
      "repro_command": "python -c \"from src.duoformer.models.duoformer_model import DuoFormerModel\"",
      "impact": "Model instantiation will fail",
      "fix_suggestion": "Check backbone module exports or fix import paths"
    },
    {
      "file_path": "src/duoformer/models/duoformer_model.py",
      "line_number": 141,
      "severity": "High",
      "type": "undefined_variable",
      "description": "resnet50FeatureExtractor is not defined",
      "repro_command": "python -c \"from src.duoformer.models.duoformer_model import DuoFormerModel\"",
      "impact": "Model initialization will fail",
      "fix_suggestion": "Define or import resnet50FeatureExtractor function"
    },
    {
      "file_path": "src/duoformer/training/train.py",
      "line_number": 46,
      "severity": "High",
      "type": "missing_function",
      "description": "create_optimizer and create_scheduler not found in trainer module",
      "repro_command": "python -c \"from src.duoformer.training.train import main\"",
      "impact": "Training script will fail to import",
      "fix_suggestion": "Add missing functions to trainer module or fix imports"
    },
    {
      "file_path": "src/duoformer/data/loaders/dataset.py",
      "line_number": 166,
      "severity": "Medium",
      "type": "type_conflict",
      "description": "Type conflict between Image and Tensor in __getitem__ method",
      "repro_command": "python -m mypy src/duoformer/data/loaders/dataset.py",
      "impact": "Type checker confusion, potential runtime issues",
      "fix_suggestion": "Fix type annotations in dataset loading logic"
    },
    {
      "file_path": "src/duoformer/models/attention/multiscale_attn.py",
      "line_number": 159,
      "severity": "Medium",
      "type": "type_error",
      "description": "Multiple \"Tensor not callable\" errors in attention mechanisms",
      "repro_command": "python -m mypy src/duoformer/models/attention/",
      "impact": "Type checking failures, potential logic errors",
      "fix_suggestion": "Fix method calls and type annotations in attention layers"
    },
    {
      "file_path": "src/duoformer/models/transformer/multi_vision_transformer.py",
      "line_number": 96,
      "severity": "Medium",
      "type": "method_signature",
      "description": "Multiple method signature incompatibilities with timm VisionTransformer",
      "repro_command": "python -m mypy src/duoformer/models/transformer/",
      "impact": "Inheritance issues, potential runtime errors",
      "fix_suggestion": "Fix method signatures to match parent class contracts"
    },
    {
      "file_path": "Multiple files",
      "line_number": null,
      "severity": "Low",
      "type": "formatting",
      "description": "Code is already properly formatted (black check passes)",
      "repro_command": "python -m black --check .",
      "impact": "No formatting issues found",
      "fix_suggestion": "No action needed - formatting is consistent"
    }
  ],
  "redundancies": [
    {
      "type": "obsolete_egg_info",
      "description": "Build artifacts in src/refactored_duoformer.egg-info/",
      "action": "Properly excluded by .gitignore (not tracked)",
      "files_affected": [
        "src/refactored_duoformer.egg-info/"
      ]
    }
  ],
  "devops_actions": [
    {
      "type": "ci_workflows",
      "description": "GitHub Actions workflows exist and are configured",
      "status": "Already implemented",
      "files": [
        ".github/workflows/ci-cd.yml",
        ".github/workflows/type-check.yml"
      ]
    },
    {
      "type": "gitignore",
      "description": "Updated .gitignore with comprehensive auto-generated file exclusions",
      "status": "Completed",
      "files": [
        ".gitignore"
      ]
    }
  ],
  "obsolete_files": [],
  "patches": {
    "fix-python-version-badge.diff": "*** Begin Patch: patches/fix-python-version-badge.diff\n*** Update File: README.md\n@@\n-[![Python 3.8+](https://img.shields.io/badge/python-3.8+-blue.svg)](https://www.python.org/downloads/)\n+[![Python 3.10+](https://img.shields.io/badge/python-3.10+-blue.svg)](https://www.python.org/downloads/)\n*** End Patch",
    "fix-dataset-split.diff": "*** Begin Patch: patches/fix-dataset-split.diff\n*** Update File: src/duoformer/data/loaders/dataset.py\n@@\n-    train_indices, val_indices, test_indices = random_split(\n-        range(total_size), [train_size, val_size, test_size], generator=generator\n-    )\n+    train_indices, val_indices, test_indices = random_split(\n+        full_dataset, [train_size, val_size, test_size], generator=generator\n+    )\n*** End Patch"
  },
  "commands": [
    "git checkout housekeeping/auto-fixes-backup",
    "git checkout -b housekeeping/auto-fixes housekeeping/auto-fixes-backup",
    "git cherry-pick 1c3b81938aa61b1678a757c39bd0001657d65882..HEAD",
    "echo \"\u2705 Housekeeping fixes applied successfully\"",
    "echo \"\ud83d\udd0d Review changes and run tests before pushing\"",
    "echo \"\ud83d\ude80 To push: git push origin housekeeping/auto-fixes\"",
    "echo \"\ud83d\udcdd To create PR: gh pr create --title \"chore: automated repository housekeeping\" --body-file REPO_HOUSEKEEPING_PR.md\""
  ]
}